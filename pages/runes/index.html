<style>
@font-face {
  font-family: runes;
  src: url('runes.ttf');
}
body {
  border: 0px;
  margin: 0px;
  background-image: url('background-1.png');
  background-size: cover;
}
#content {
  width: 100%;
  height: 100%;
  backdrop-filter: blur(13px);
}
#output {
  background: rgba( 1, 1, 1, 0.43 );
  font-family: 'runes';
  font-size: 17pt;
  color: white;
  position: absolute;
  left: 50%;
  top: 50%;
  height: 14em;
  width: 34em;
  border: 1px solid rgba(144,144,144,1);
  transform: translate(-40%, -40%);
  white-space: pre-wrap;
  padding: 1.4em;
  letter-spacing: -0.18em;
  line-height: 1.7em;
}
#input-container {
  position: absolute;
  left: 50%;
  top: calc(50% + 34em/2 + 3.3em);
  transform: translate(-50%, -50%);
  width: 300px;
  height: 140px;
  white-space: pre-wrap;
  outline: none;
  overflow: hidden;
}
br {
  height: 1.4em;
}
#input {
  position: relative;
  width: 100%;
  height: 100%;
  filter: blur(4px);
  opacity: 43%;
}
</style>
<body>
<div id='content'>
<div id='output'></div>
<div id='input-container'><textarea id='input'></textarea></div>
</div>
</body>
<script>

document.addEventListener("DOMContentLoaded", function(event) {
  let input = document.querySelector('#input')
  let output = document.querySelector('#output')

  console.log(input)

  input.addEventListener('keyup', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault()
      input.value += '<br/>'
    }
  })

  input.addEventListener('input', (e) => {
    let v = input.value
    v = v.replace(/\s/g,'           ')
    v = v.replace(/\r/g,'').replace(/\n/g,'<br>\n')
    output.innerHTML = v
  })

  let offsetX;
  let offsetY;

  let p = {
    _x: 0,
    _y: 0,
    _ox: 0,
    _oy: 0,
  }

  output.addEventListener('dragstart', (e) => {
    const rect = e.target.getBoundingClientRect();
    p._x = e.clientX
    p._y = e.clientY
    p._ox = rect.x - e.clientX
    p._oy = rect.y - e.clientY
    p._w = rect.width
    p._h = rect.height
  })

  output.addEventListener('dragend', (e) => {
    e.stopPropagation()
    output.style.left = (e.clientX + p._ox) + 'px';
    output.style.top = (e.clientY + p._oy) + 'px';
    return false
  })

  document.addEventListener('mousemove', (e) => {
    // console.log(e.clientX)
    // console.log(e.clientY)
  })
})

</script>
